{% extends 'dashboard/base.html' %}
{% load imagekit %}
{% load effigia_extras %}

{% block dashboard %}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Feeds</h1>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        {% for action in actions %}
        <div class="well">
            <div class="media">
                <div class="media-left">
                    <a href="{% url 'gallery:list-by-user' action.actor %}">
                        <img src="https://placehold.it/75x75" alt="">
                    </a>
                </div>
                <div class="media-body">
                    <p>
                        <a href="{% url 'gallery:list-by-user' action.actor %}">@{{ action.actor }}</a> {{ action.verb }} <a href="{{ action.target.get_absolute_url }}">{{ action.target }}</a> {{ action.timesince }} ago.
                    </p>
                    <div class="feed-card panel panel-default">
                        <div class="panel-body">
                            <div class="media">
                                {% with source=action.target|get_image %}
                                    {% if source %}
                                        <div class="media-left">
                                            {% generateimage 'feed-card-thumbnail' source=source -- alt=action.target %}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                                <div class="media-body">
                                    <span class="h4">
                                        {{ action.target }}
                                        <small>by <a href="{% url 'gallery:list-by-user' action.actor %}">@{{ action.target.created_by }}</a></small>
                                    </span>
                                    <a href="{{ action.target.get_absolute_url }}">
                                    </a>
                                    <br>
                                    <em class="text-muted">
                                        {% if action.target.description %}
                                            {{ action.target.description|slice:':75' }}...
                                        {% else %}
                                            No description was provided.
                                        {% endif %}
                                    </em>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
            <div class="well">
                <em class="text-muted">No activities to display here yet. Be the first.</em>
            </div>
        {% endfor %}
        {% if all_actions_count > 20 %}
            {% url 'group:item' group.slug as next_url %}
            {% include 'partials/pagination.html' with next_url=next_url %}
        {% endif %}
    </div>
</div>

{% endblock %}
